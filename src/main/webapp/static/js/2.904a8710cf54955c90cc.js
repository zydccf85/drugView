webpackJsonp([2],{DsdM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),n=a("7+uW"),r=a("W1GH"),l=a.n(r),s={name:"Drug",data:function(){return{condition:{name:""},pager:{pageNo:1,pageSize:8,totalSize:0},dataTable:[],dataOptions:[],filterData:[],loading:!1,dialogFormVisible:!1,title:[{prop:"id",label:"编号",width:80},{prop:"code",label:"编码",width:100},{prop:"name",label:"药品名称",width:200},{prop:"spci",label:"规格",width:150},{prop:"form",label:"剂型",width:100},{prop:"address",label:"厂商",width:200},{prop:"unit",label:"单位",width:100},{prop:"unitprice",label:"单价",width:100,formatter:function(e,t,a,i){return l.a.formatMoney(a,"￥",2,",",".")}},{prop:"searchcode",label:"搜索码",width:100},{prop:"cate",label:"分类",width:100}],flag:!0,drug:{id:"",code:"",name:"",form:"",address:"",unit:"",unitprice:"",searchcode:"",cate:""},oriDrug:null,selectedRow:null}},created:function(){this.initData(1)},methods:{initData:function(e){var t=this;this.pager.pageNo=e,n.default.axios.get("/polls/getDrug",{params:this.condition}).then(function(e){if(console.log(e),t.dataTable=e.data.data,t.pager.totalSize=e.data.count,!t.condition.name){var a={};t.dataOptions=e.data.data.reduce(function(e,t){return!a[t.name]&&(a[t.name]=e.push(t)),e},[]),console.log(t.dataOptions)}})},handleEdit:function(e,t){this.selectedRow=t,o()(this.drug,t),this.dialogFormVisible=!0},btnOk:function(){var e=this;n.default.axios.put("/polls/getDrug",this.drug).then(function(t){console.log(t.data);var a=e;t.data.updateCount>0&&(e.dialogFormVisible=!1,e.$message({message:"更新成功",type:"success",duration:1e3,onClose:function(){a.initData(a.pager.pageNo)}}))})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将 ["+t.name+"] 删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$message({type:"success",message:"删除成功!"})}).catch(function(){})},handleAdd:function(){for(var e in this.drug)this.drug[e]="";this.dialogFormVisible=!0},remoteFilter:function(e){var t=this;this.loading=!0,setTimeout(function(){t.loading=!1,t.filterData=t.dataOptions.filter(function(t){return t.searchcode.indexOf(e)>=0})},200)}},computed:{getData:function(){var e=(this.pager.pageNo-1)*this.pager.pageSize,t=this.pager.pageNo*this.pager.pageSize;return this.dataTable.slice(e,t)}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-2"},[a("el-page-header",{staticClass:"mb-2 pb-2 border-bottom border-muted",attrs:{content:"详情页面"},on:{back:function(e){}}}),e._v(" "),a("el-row",{staticClass:"bg－primary",attrs:{gutter:15}},[a("el-col",{attrs:{span:24}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("h4",[e._v("基本药品信息")])]),e._v(" "),a("div",[a("el-form",{staticClass:"d-flex justify-content-center",attrs:{inline:!0,model:e.condition}},[a("el-form-item",{attrs:{label:"药品名称"}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:"请选择",loading:e.loading,clearable:"","remote-method":e.remoteFilter},model:{value:e.condition.name,callback:function(t){e.$set(e.condition,"name",t)},expression:"condition.name"}},e._l(e.filterData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(t){return e.initData(1)}}},[e._v("查 询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),e._v(" "),a("div",{staticClass:"border border-muted"},[a("el-table",{attrs:{data:e.getData,stripe:"",border:"","row-class-name":"m-0 p-0 ","header-row-class-name":"text-primary m-0 p-0",size:"mini","highlight-current-row":e.flag,height:"380","header-cell-class-name":"border-top border-muted p-1","cell-class-name":"border border-muted p-1 "}},[e._l(e.title,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,"header-align":"center",align:"center",width:e.width,formatter:e.formatter,"show-overflow-tooltip":"true"}})}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],2),e._v(" "),a("el-pagination",{staticClass:"d-flex justify-content-end",attrs:{layout:"total,prev, pager, next",background:"","hide-on-single-page":"","page-size":e.pager.pageSize,"current-page":e.pager.pageNo,total:e.pager.totalSize},on:{"current-change":function(e){},"update:currentPage":function(t){return e.$set(e.pager,"pageNo",t)},"update:current-page":function(t){return e.$set(e.pager,"pageNo",t)}}})],1)],1)])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"药品明细",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.drug,"label-width":"80px",size:"mini","label-suffix":":"}},e._l(e.title,function(t,i){return a("el-form-item",{key:i,staticClass:"my-0 text-primary",attrs:{label:t.label,size:"mini"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.drug[t.prop],callback:function(a){e.$set(e.drug,t.prop,a)},expression:"drug[item.prop]"}})],1)}),1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.oriDrug==e.selectedRow},on:{click:e.btnOk}},[e._v("修 改")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,d,!1,function(e){a("EYo5")},"data-v-05dde3b4",null);t.default=c.exports},EYo5:function(e,t){}});
//# sourceMappingURL=2.904a8710cf54955c90cc.js.map